(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{796:function(s,a,t){"use strict";t.r(a);var n=t(26),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"kibana的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana的使用"}},[s._v("#")]),s._v(" kibana的使用")]),s._v(" "),t("ClientOnly",[t("Valine")],1),s._v(" "),t("h2",{attrs:{id:"_1-elasticsearch注意情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-elasticsearch注意情况"}},[s._v("#")]),s._v(" 1. ElasticSearch注意情况")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("我们的数据是存储在ElasticSearch里的，因为要做数据分析，因为要做数据分析，所以在ES里的数据需要是结构化的，不要是一大段没有结构的文本，这样是无法进行分析的 。\n")]),t("div",{staticStyle:{width:"523px",height:"255px"}},[t("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"/blog/images/accumulation/other/elk-note/es_use.jpg"}})]),t("p")]),s._v(" "),t("li",[t("p",[s._v("注意字段是否有分词的情况")]),s._v(" "),t("ul",[t("li",[s._v("如果一个字段的type是text而不是keyword，就有可能会影响统计")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 字段source: 央视新闻")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 类型为text")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'analyzer'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ik_max_word'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一个分词的操作")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'text'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// => 央视、新闻 => 在正常情况下，会分为两个词，然后单独地进行统计，然后统计四个字的时候，可能会获取不到")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其中一个解决办法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 给这个字段加一个扩展类型，类型为keyword")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'analyzer'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ik_max_word'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一个分词的操作")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'text'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fields'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个名字可以随意定义")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'keyword1'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'keyword'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// => source.keyword => 央视新闻")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_2-kibana使用前期准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-kibana使用前期准备"}},[s._v("#")]),s._v(" 2. kibana使用前期准备")]),s._v(" "),t("h3",{attrs:{id:"_2-1-准备测试数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-准备测试数据"}},[s._v("#")]),s._v(" 2.1. 准备测试数据")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("威廉·莎士比亚全集")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/shakespeare_6.0.json")])])])]),s._v(" "),t("li",[t("p",[s._v("一组虚构的账户与随机生成的数据")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/accounts.zip")])])])]),s._v(" "),t("li",[t("p",[s._v("一组随机生成的日志文件")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/logs.json.gz")])])]),s._v(" "),t("h3",{attrs:{id:"_2-2-kibana创建图表的流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-kibana创建图表的流程"}},[s._v("#")]),s._v(" 2.2 kibana创建图表的流程")]),s._v(" "),t("ol",[t("li",[s._v("准备数据")]),s._v(" "),t("li",[s._v("创建mapping")])]),s._v(" "),t("ul",[t("li",[s._v("在开发工具中创建")]),s._v(" "),t("li",[s._v("之后确认mapping\n"),t("ul",[t("li",[t("code",[s._v("GET /.kibana_1/_mapping")])])])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("导入数据")])]),s._v(" "),t("ul",[t("li",[s._v("导入之后需要确认数据\n"),t("ul",[t("li",[t("code",[s._v("GET /.kibana_1/_search")])])])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("创建索引模式")])]),s._v(" "),t("ul",[t("li",[s._v("在管理操作界面Management，在Kibana栏目下，点击第一个，即索引模式")]),s._v(" "),t("li",[s._v("索引模式输入框中，我们可以使用通配符*调取所有与其前缀相关的索引")]),s._v(" "),t("li",[s._v("创建成功后，可以在页面上看出，可以被检索的字段，与可以被统计的字段等")])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("设计图表")])]),s._v(" "),t("ul",[t("li",[s._v("进Discover中，可以探索一下数据")]),s._v(" "),t("li",[s._v("根据筛选查出数据")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("制作图表完成工作")])]),s._v(" "),t("ul",[t("li",[s._v("进入到Visualize中进行图表创作")]),s._v(" "),t("li",[s._v("点击创建图表 => 选择图表类型 => 选择数据集")]),s._v(" "),t("li",[s._v("选择x轴 => 选择聚合(关键字或者日期等) => 选择字段")]),s._v(" "),t("li",[s._v("顺序=>表示升序或者降序、大小=>表示当前一共显示多少个柱状图")]),s._v(" "),t("li",[s._v("左上角点击保存，Visualize中就可以看到结果了")]),s._v(" "),t("li",[s._v("我们可以在Visualize中的图表基础上继续创作")]),s._v(" "),t("li",[s._v("可以进入仪表台里面来管理多个图表")])])])]),s._v(" "),t("h3",{attrs:{id:"_2-3-kibana主界面菜单栏"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-kibana主界面菜单栏"}},[s._v("#")]),s._v(" 2.3. kibana主界面菜单栏")]),s._v(" "),t("ul",[t("li",[s._v("Discover - 数据探索\n"),t("ul",[t("li",[s._v("左侧菜单栏可以选择已经创建的索引模式")]),s._v(" "),t("li",[s._v("菜单选择下面可用字段中左边的图标表示字段类型，地球标志的图标表示坐标类型的数据")])])]),s._v(" "),t("li",[s._v("Visualize - 图表创作")]),s._v(" "),t("li",[s._v("Dashboard - 仪表台\n"),t("ul",[t("li",[s._v("可以把很多图表组合为一个大的仪表台")]),s._v(" "),t("li",[s._v("通俗来讲，仪表台可能类似汽车上的速度表、流量表等")]),s._v(" "),t("li",[s._v("我们先单独地去制作一个个单独地仪表，然后再在仪表台里面将他们组合起来")])])]),s._v(" "),t("li",[s._v("Timelion\n"),t("ul",[t("li",[s._v("时序模式，高级一点的时序图表会用到这个")])])]),s._v(" "),t("li",[s._v("Machine Learning\n"),t("ul",[t("li",[s._v("机器学习，使用kibana创建一些机器学习的操作等")])])]),s._v(" "),t("li",[s._v("Graph\n"),t("ul",[t("li",[s._v("图能力，探索ES里面的数据关联等")])])]),s._v(" "),t("li",[s._v("Dev Tools\n"),t("ul",[t("li",[s._v("开发者工具，在这里可以和ES进行相互操作")])])]),s._v(" "),t("li",[s._v("Monitoring\n"),t("ul",[t("li",[s._v("监控，主要是对elk系统中，已经加入链接的ElasticSearch以及Logstash的运行状况等进行监控")])])]),s._v(" "),t("li",[s._v("Management\n"),t("ul",[t("li",[s._v("管理操作，例如用户权限，kibana的索引模式，已保存的图表管理、高级设置等")])])])]),s._v(" "),t("h2",{attrs:{id:"_3-kibana使用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-kibana使用示例"}},[s._v("#")]),s._v(" 3. kibana使用示例")]),s._v(" "),t("h3",{attrs:{id:"_3-1-威廉·莎士比亚全集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-威廉·莎士比亚全集"}},[s._v("#")]),s._v(" 3.1. 威廉·莎士比亚全集")]),s._v(" "),t("ol",[t("li",[s._v("下载")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/shakespeare_6.0.json")])])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("创建mapping")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shakespeare\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"speaker"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"play_name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"line_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"speech_number"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("导入数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("curl -H 'Content-Type: application/x-ndjson' -XPOST 'http://elasticserver:9200/shakespeare/doc/_bulk?pretty' -u elktest[自己的账号] --data-binary @/download/shakespeare_6.0.json")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("确认mapping")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /shakespeare/_mapping")])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("确认数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /shakespeare/_search")])])]),s._v(" "),t("h3",{attrs:{id:"_3-2-一组虚构的账户与随机生成的数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-一组虚构的账户与随机生成的数据"}},[s._v("#")]),s._v(" 3.2. 一组虚构的账户与随机生成的数据")]),s._v(" "),t("blockquote",[t("p",[s._v("本示例无需创建mapping")])]),s._v(" "),t("ol",[t("li",[s._v("下载")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/accounts.zip")])])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("解压缩")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("unzip accounts.zip")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("yum install zip unzip")])])])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("导入数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("curl -H 'Content-Type: application/x-ndjson' -XPOST 'http://elasticserver:9200/bank/account/_bulk?pretty' -u elktest[自己的账号] --data-binary @/download/accounts.json")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("确认mapping")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /account/_mapping")])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("确认数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /account/_search")])])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("进入到Management中创建索引模式")])]),s._v(" "),t("ul",[t("li",[s._v("bank")]),s._v(" "),t("li",[s._v("可以看到有些字段可以被统计等信息")])]),s._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[s._v("进入到Discover查看数据情况")])]),s._v(" "),t("ul",[t("li",[s._v("进入到bank，看到有数据了")])]),s._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[s._v("分析字段，设计需要制作的图表 - 饼图")]),s._v(" "),t("li",[s._v("进入到Visualize进行图表制作")])]),s._v(" "),t("ul",[t("li",[s._v("创建一个饼图")]),s._v(" "),t("li",[s._v("选择索引模式-bank")]),s._v(" "),t("li",[s._v("点击Split来分割")]),s._v(" "),t("li",[s._v("分割的依据Aggregation选择range区间模式")]),s._v(" "),t("li",[s._v("分割的字段field，选择***(balance)")]),s._v(" "),t("li",[s._v("分成若干个区间(1-10, 10-20，...)")]),s._v(" "),t("li",[s._v("图表生成后，可以基于当前图表创建一个新的图表")]),s._v(" "),t("li",[s._v("点击add sub-buckets创建外围扩展图")]),s._v(" "),t("li",[s._v("选择切片类型")]),s._v(" "),t("li",[s._v("sub Aggregation聚合选择terms")]),s._v(" "),t("li",[s._v("选择字段age")])]),s._v(" "),t("h3",{attrs:{id:"_3-3-一组随机生成的日志文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-一组随机生成的日志文件"}},[s._v("#")]),s._v(" 3.3. 一组随机生成的日志文件")]),s._v(" "),t("blockquote",[t("p",[s._v("主要取其中的经纬度")])]),s._v(" "),t("ol",[t("li",[s._v("下载")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("wget https://download.elastic.co/demos/kibana/gettingstarted/logs.jsonl.gz")])])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("解压缩")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("gunzip logs.jsonl.gz")])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("创建mapping")])]),s._v(" "),t("blockquote",[t("p",[s._v("可以直接在kibana里面的开发工具直接运行")])]),s._v(" "),t("ul",[t("li",[s._v("创建mapping-1")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logstash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015.05")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".18")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coordinates"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo_point"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("创建mapping-2")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logstash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015.05")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".19")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coordinates"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo_point"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("创建mapping-3")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logstash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015.05")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coordinates"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geo_point"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("导入数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("curl -H 'Content-Type: application/x-ndjson' -XPOST ''http://elasticserver:9200/_bulk?pretty' -u elktest[自己的账号] --data-binary @/download/logs.jsonl")])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("确认mapping")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /logstash-2015.05.20/_mapping")])])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("确认数据")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /logstash-2015.05.20/_search")])])]),s._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[s._v("创建索引模式")])]),s._v(" "),t("ul",[t("li",[s._v("这时候要用通配符了，因为有三个索引")]),s._v(" "),t("li",[s._v("logstash-2015.05*")]),s._v(" "),t("li",[s._v("更改字段(例如时间)")])]),s._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[s._v("进入Visualize创建图表")])]),s._v(" "),t("ul",[t("li",[s._v("选择地图图表")]),s._v(" "),t("li",[s._v("选择索引模式")]),s._v(" "),t("li",[s._v("点击右上角选择时间范围(因为日志数据在2015)")]),s._v(" "),t("li",[s._v("左侧栏，选择坐标作为依据，选择坐标字段")]),s._v(" "),t("li",[s._v("运行之后就可以看到地图上显示了坐标点")])]),s._v(" "),t("h2",{attrs:{id:"_4-将kibana以iframe的方式嵌入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-将kibana以iframe的方式嵌入"}},[s._v("#")]),s._v(" 4. 将kibana以iframe的方式嵌入")]),s._v(" "),t("ul",[t("li",[s._v("进入Visualize或者Dashboard，点击共享")]),s._v(" "),t("li",[s._v("固定链接中会带菜单栏和头部")]),s._v(" "),t("li",[s._v("点击嵌入代码，不选择短url，生成的页面是只带图表的\n"),t("ul",[t("li",[s._v("在链接中，修改其参数可以修改图表，包括样式")])])]),s._v(" "),t("li",[s._v("快照和嵌入代码\n"),t("ul",[t("li",[s._v("snapshot是个快照，snapshot不会随着服务器的配置而更新， 因此snapshot把当前dashboard的配置都加到url的query参数里了")]),s._v(" "),t("li",[s._v("saved 只有dashboard的访问url， 具体配置参数不传递， 根据kibana服务器的即时配置来返回结果呈现给用户")]),s._v(" "),t("li",[s._v("通过snapshot和saved的对比， 我们可以推测kibana的过滤和搜索传递的参数方式")])])])]),s._v(" "),t("h2",{attrs:{id:"_5-kibana的dashboard内嵌到web中的定制化问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-kibana的dashboard内嵌到web中的定制化问题"}},[s._v("#")]),s._v(" 5. kibana的dashboard内嵌到web中的定制化问题")]),s._v(" "),t("ul",[t("li",[s._v("2个通用的需求：\n"),t("ol",[t("li",[s._v("去掉AddFilter按钮")])]),s._v(" "),t("ul",[t("li",[s._v("因为跨域访问的问题， 导致外层无法访问iframe内部的contentwindow等元素， 也就失去了控制子元素显示或隐藏的机会")]),s._v(" "),t("li",[s._v("最终通过修改kibana前端源码完成， 具体到XXX:\\Bitnami\\elk-6.2.3-0\\kibana\\optimize\\bundles\\commons.style.css")]),s._v(" "),t("li",[s._v('找到".filter-bar"， 添加display:none即可')])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("自定义传参过滤或者搜索")])]),s._v(" "),t("ul",[t("li",[s._v("这个需要仔细分析kibana的dashboard的share的两者方式的不同处")])])]),s._v(" "),t("li",[s._v("了解生成的iframe地址中参数的意义\n"),t("ul",[t("li",[s._v("示例地址\n"),t("ul",[t("li",[t("code",[s._v("http://192.168.2.240:5601/goto/ab0deee9d5440c185aed952efa11c5c2?embed=true&_g=()")])]),s._v(" "),t("li",[t("code",[s._v("http://192.168.2.240:5601/app/kibana#/dashboard/df0384c0-87cc-11eb-9a4c-c78247994cce?embed=true&_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:'2021-02-28T16:00:00.000Z',to:'2021-03-31T16:00:00.000Z'))&_a=(description:'',filters:!(),fullScreenMode:!f,options:(hidePanelTitles:!f,useMargins:!t),panels:!((embeddableConfig:(),gridData:(h:15,i:'1',w:24,x:24,y:0),id:'1ef68cb0-87ca-11eb-9a4c-c78247994cce',panelIndex:'1',type:visualization,version:'7.1.1'),(embeddableConfig:(),gridData:(h:15,i:'2',w:24,x:0,y:0),id:a62a4bc0-87cc-11eb-9a4c-c78247994cce,panelIndex:'2',type:visualization,version:'7.1.1')),query:(language:kuery,query:''),timeRestore:!f,title:zmx_test%E4%BB%AA%E8%A1%A8%E7%9B%98,viewMode:view)")])])])]),s._v(" "),t("li",[s._v("ab0deee9d5440c185aed952efa11c5c2 => 表示dashboard的_id")]),s._v(" "),t("li",[s._v("embed=true => 代表内嵌到web中， 即只有dashboard，没有kibana的左边导航栏等")]),s._v(" "),t("li",[s._v("_a 传递了具体的配置的参数， 内部有filter和query等\n"),t("ul",[t("li",[s._v("_a内每次大括号类似json对象的花括号，因此层次不能省略")])])]),s._v(" "),t("li",[s._v("filters:!(）内就是具体过滤的配置， 效果就是AddFilter按钮上变成了具体的过滤值。\n"),t("ul",[t("li",[s._v("比如我们添加systemid为123456789012的过滤，拼成的过滤url字符串简化掉不需要的参数为"),t("code",[s._v("filters:!((meta:(),query:(match:(systemID.keyword:(query:'123456789012',type:phrase)))))")])]),s._v(" "),t("li",[s._v("最终形成"),t("code",[s._v("xxxx/?_g= ()&_a=(filters:!((meta:(),query:(match:(systemID.keyword:(query:'123456789012',type:phrase))))))")])])])]),s._v(" "),t("li",[s._v("_g()之前是原始的dashboard的url， 后面_a是我们添加的过滤url\n"),t("ul",[t("li",[s._v("_g也有2个关键的字段， refreshInterval和time")]),s._v(" "),t("li",[s._v("refreshInterval控制是否自动刷新以及刷新频率")]),s._v(" "),t("li",[s._v("time设置dashboard的时间范围from和to，时间间隔interval， 以及时区设置timezone，保证时间轴的时间显示正确")])])]),s._v(" "),t("li",[s._v("query:(match:(systemID.keyword:(query:'123456789012',type:phrase))) 是filter里最关键的字符串，  类似json")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 类似es的queryDSL语句。我们修改sytemId.keyword 和12345679012为我们真正动态改变的字段和值即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// filter是查询完成后再过滤，query是直接查询")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"systemID.keyword"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"phrase"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456789012"')]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过query实现特定数据的方法如下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// http://localhost:81/elk/app/kibana#/dashboard/de8df1e0-58a6-11e8-aa0c-7db6a9fbe317?embed=true & _g=() & _a=(query:(language:lucene,query:'systemID.keyword:123456789012'))")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 同样的我们动态修改 "systemID.keyword:123456789012" 为我们具体的field和value即可')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// query的语句类似为")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"language"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lucene"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"systemID.keyword:123456789012"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])])]),s._v(" "),t("hr"),s._v(" "),t("br"),s._v(" "),t("p",[t("font",{attrs:{color:"#666",size:"5"}},[s._v("~End~")])],1)],1)}),[],!1,null,null,null);a.default=e.exports}}]);