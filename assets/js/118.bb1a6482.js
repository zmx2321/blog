(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{871:function(a,i,l){"use strict";l.r(i);var _=l(25),v=Object(_.a)({},(function(){var a=this,i=a.$createElement,l=a._self._c||i;return l("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[l("h1",{attrs:{id:"初识elk"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#初识elk"}},[a._v("#")]),a._v(" 初识elk")]),a._v(" "),l("ClientOnly",[l("Valine")],1),a._v(" "),l("blockquote",[l("p",[l("a",{attrs:{href:"https://www.elastic.co/guide/cn/kibana/current/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方说明手册传送门"),l("OutboundLink")],1)])]),a._v(" "),l("h2",{attrs:{id:"_1-适用对象"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-适用对象"}},[a._v("#")]),a._v(" 1. 适用对象")]),a._v(" "),l("ul",[l("li",[a._v("对各种数据可视化需求并期望找到一个解决方案的同学")]),a._v(" "),l("li",[a._v("希望对运维有一些了解的同学")]),a._v(" "),l("li",[a._v("本文档需要有一些基础的互联网开发知识，对ElasticSearch有了解")])]),a._v(" "),l("h2",{attrs:{id:"_2-elk家族介绍"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_2-elk家族介绍"}},[a._v("#")]),a._v(" 2. elk家族介绍")]),a._v(" "),l("blockquote",[l("p",[a._v("在实际工作中，我们每天都会有很多的数据需要收集、处理、分析，elk提供了这个需求的整体解决方案")])]),a._v(" "),l("ul",[l("li",[a._v("e => ElasticSearch\n"),l("ul",[l("li",[a._v("是一个实时的分布式搜索引擎，他可以用于全文搜索，结构化搜索及分析。")]),a._v(" "),l("li",[a._v("在ElasticSearch中，我们可以存储海量的数据")]),a._v(" "),l("li",[a._v("简称为es")])])]),a._v(" "),l("li",[a._v("l => Logstash\n"),l("ul",[l("li",[a._v("是ELK的数据收集、分发工具，用于不同目标收集不同格式的数据，经过格式化处理后输出到不同的存储目标 。")])])]),a._v(" "),l("li",[a._v("k => Kibana\n"),l("ul",[l("li",[a._v("提供了可视化的平台，他可以在ElasticSearch的索引中查找、交互数据，并生成各种表格、图形等。便于进行数据分析的工作 。")])])]),a._v(" "),l("li",[a._v("在elk家族中，Logstash负责收集各种类型的数据进行处理，然后把这些海量的数据入库到ElasticSearch中，最终由Kibana负责数据的可视化展示")])]),a._v(" "),l("h2",{attrs:{id:"_3-kibana安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_3-kibana安装"}},[a._v("#")]),a._v(" 3. kibana安装")]),a._v(" "),l("blockquote",[l("p",[l("a",{attrs:{href:"https://www.elastic.co/cn/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("kibana"),l("OutboundLink")],1)])]),a._v(" "),l("ul",[l("li",[a._v("如果ElasticSearch、Logstash、Kibana要一起合用，大版本要一致")]),a._v(" "),l("li",[a._v("安装X-pack插件用来身份验证\n"),l("ul",[l("li",[a._v("用户 => X-pack => Kibana")])])]),a._v(" "),l("li",[a._v("不建议ELK系列软件使用root用户运行\n"),l("ul",[l("li",[a._v("可以创建一个elastic用户")])])]),a._v(" "),l("li",[a._v("下载命令：\n"),l("ul",[l("li",[a._v("wget https://artifacts.elastic.co/downloads/kibana/kibana-7.11.2-x86_64.tar.gz => 49M")])])]),a._v(" "),l("li",[a._v("解压：\n"),l("ul",[l("li",[a._v("tar -zxvf kibana-7.11.2-linux-x86_64.tar.gz")]),a._v(" "),l("li",[a._v("之后可以重命名一下:"),l("code",[a._v("mv kibana-7.11.2-linux-x86_64 kibana")])]),a._v(" "),l("li",[a._v("放到local中: "),l("code",[a._v("mv kibana /usr/local/")])])])]),a._v(" "),l("li",[a._v("配置\n"),l("ul",[l("li",[a._v("进到主目录 => "),l("code",[a._v("cd /usr/local/kibana")])]),a._v(" "),l("li",[a._v("主要有四个文件夹需要注意\n"),l("ul",[l("li",[a._v("bin => kibana可执行应用程序目录，包含kibana和安装插件的kibana-plugin等\n"),l("ul",[l("li",[a._v("安装身份验证插件x-pack:"),l("code",[a._v("/usr/local/kibana/bin/kibana-plugin install x-pack")])]),a._v(" "),l("li",[a._v("他会自动去找对应版本的x-pack插件，下载然后安装")])])]),a._v(" "),l("li",[a._v("config\n"),l("ul",[l("li",[a._v("kibana的配置文件目录，包含kibana.yml文件")]),a._v(" "),l("li",[a._v("cd config => 找到kibana.yml")]),a._v(" "),l("li",[a._v("vim kibana.yml")]),a._v(" "),l("li",[a._v("我们的主要配置\n"),l("ul",[l("li",[a._v("server.port => 5601")]),a._v(" "),l("li",[a._v("server.host => 0.0.0.0")]),a._v(" "),l("li",[a._v("server.name => kibana")]),a._v(" "),l("li",[a._v("elasticsearch.url => ES实例地址")]),a._v(" "),l("li",[a._v("elasticsearch.username => 链接ES时使用的用户名\n"),l("ul",[l("li",[a._v("这个用户需要具有manager权限，不然会报错，因为kibana也需要有往里面存数据等操作")])])]),a._v(" "),l("li",[a._v("elasticsearch.password => 链接ES时使用的密码")]),a._v(" "),l("li",[a._v("kibana.index => .kibana")]),a._v(" "),l("li",[a._v("xpack.security.encrypitopnKey => 随便写一个但需要长度为32位的字符串")])])]),a._v(" "),l("li",[a._v("详细配置说明详见kibana配置项")])])]),a._v(" "),l("li",[a._v("data\nkibana或kibana插件写数据的存储目录")]),a._v(" "),l("li",[a._v("plugins\n插件目录，kibana的每一个插件都会存在该目录")])])])])]),a._v(" "),l("li",[a._v("启动\n"),l("ul",[l("li",[l("code",[a._v("/usr/local/kibana/bin/kibana")])]),a._v(" "),l("li",[l("code",[a._v("nohub /usr/local/kibana/bin/kibana > /dev/null &")]),a._v(" => 后台运行")]),a._v(" "),l("li",[a._v("初始化用户名: kibana / 初始密码: changeme")])])])]),a._v(" "),l("h2",{attrs:{id:"_4-kibana配置项"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_4-kibana配置项"}},[a._v("#")]),a._v(" 4. kibana配置项")]),a._v(" "),l("ul",[l("li",[a._v("server.port => kibana绑定的端口号，默认是5601")]),a._v(" "),l("li",[a._v("server.host => 默认是localhost")]),a._v(" "),l("li",[a._v("server.name => 实例名称，默认主机名")]),a._v(" "),l("li",[a._v("kibana.defaultAppId => 进入kibana时加载的应用，默认是discover")]),a._v(" "),l("li",[a._v("eleasticsearch.url => ES实例地址，用来处理所有的查询请求，默认是 http://localhost:9200")]),a._v(" "),l("li",[a._v("eleasticsearch.username => 链接ES时使用的用户名，如果ES没有设置用户权限，此项可不以启用")]),a._v(" "),l("li",[a._v("eleasticsearch.password => 链接ES时使用的密码，如果ES没有设置用户权限，此项可不以启用")]),a._v(" "),l("li",[a._v("kibana.index => kibana需要在ES中创建一个索引来存储kibana的搜索、可视化和仪表盘的数据。如果该索引不存在，则会自动创建，默认是.kibana")]),a._v(" "),l("li",[a._v("elasticsearch.pingTimeout => 设置请求ES的响应超时时间，单位毫秒，默认是elasticsearch.requestTimeout")]),a._v(" "),l("li",[a._v("elasticsearch.requestTimeout => ES响应超时时间(毫秒)，该值必须为正整数，默认3000")]),a._v(" "),l("li",[a._v("elasticsearch.shardTimeout => ES等待碎片响应的时间(毫秒)。设置为0以禁用。默认值为0")]),a._v(" "),l("li",[a._v("logging.dest => kibana日志输出文件，默认是stdout")]),a._v(" "),l("li",[a._v("logging.slient => 设置改配置，所有日志都输出，默认是false")]),a._v(" "),l("li",[a._v("xpack.security.encrypitopnKey => 加密秘钥，防止密码被暴力破解\n"),l("ul",[l("li",[a._v("原先没有，要自己加，最后一个key是大写")])])]),a._v(" "),l("li",[l("a",{attrs:{href:"https://www.elastic.co/guide/en/kibana/current/settings.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("更多配置传送带"),l("OutboundLink")],1)])]),a._v(" "),l("h2",{attrs:{id:"_5-kibana汉化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_5-kibana汉化"}},[a._v("#")]),a._v(" 5. kibana汉化")]),a._v(" "),l("blockquote",[l("p",[a._v("这个过程是不可逆的，汉化工具是直接修改原始Kibana程序里面的文字来进行汉化的，如果要改回来，需要重装")])]),a._v(" "),l("ul",[l("li",[a._v("kibana的配置文件目录，包含kibana.yml文件")]),a._v(" "),l("li",[a._v("修改kibana.yml文件最后一行")]),a._v(" "),l("li",[a._v("改成"),l("code",[a._v('i18n.local:"zh-CN"')])]),a._v(" "),l("li",[a._v("重启")])]),a._v(" "),l("hr"),a._v(" "),l("br"),a._v(" "),l("p",[l("font",{attrs:{color:"#666",size:"5"}},[a._v("~End~")])],1)],1)}),[],!1,null,null,null);i.default=v.exports}}]);