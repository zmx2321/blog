(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{779:function(l,v,t){"use strict";t.r(v);var _=t(25),a=Object(_.a)({},(function(){var l=this,v=l.$createElement,t=l._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu部署服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu部署服务"}},[l._v("#")]),l._v(" Ubuntu部署服务")]),l._v(" "),t("ClientOnly",[t("Valine")],1),l._v(" "),t("h2",{attrs:{id:"_1-服务器信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-服务器信息"}},[l._v("#")]),l._v(" 1. 服务器信息")]),l._v(" "),t("ul",[t("li",[l._v("服务器类型：Ubuntu")]),l._v(" "),t("li",[l._v("账号：test")]),l._v(" "),t("li",[l._v("密码：xxx")]),l._v(" "),t("li",[l._v("远程链接端口：222")]),l._v(" "),t("li",[l._v("链接远程服务器\n"),t("ul",[t("li",[l._v("ssh -p 222 test@192.168.0.146 ---- xxx")])])])]),l._v(" "),t("h2",{attrs:{id:"_2-部署项目服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署项目服务"}},[l._v("#")]),l._v(" 2. 部署项目服务")]),l._v(" "),t("h3",{attrs:{id:"_2-1-内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-内容"}},[l._v("#")]),l._v(" 2.1. 内容")]),l._v(" "),t("ul",[t("li",[l._v("安装nginx")]),l._v(" "),t("li",[l._v("安装jdk")]),l._v(" "),t("li",[l._v("安装tomcat")]),l._v(" "),t("li",[l._v("安装mysql")]),l._v(" "),t("li",[l._v("mysql链接navicat")])]),l._v(" "),t("h3",{attrs:{id:"_2-2-安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-安装nginx"}},[l._v("#")]),l._v(" 2.2. 安装nginx")]),l._v(" "),t("ol",[t("li",[t("p",[l._v("更新APT源")]),l._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[l._v("sudo apt-get update \nsudo apt-get install nginx\n")])]),l._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[l._v("1")]),t("br"),t("span",{staticClass:"line-number"},[l._v("2")]),t("br")])])]),l._v(" "),t("li",[t("p",[l._v("修改配置文件")]),l._v(" "),t("ul",[t("li",[l._v("/etc/nginx/nginx.conf 主配置文件")]),l._v(" "),t("li",[l._v("/etc/nginx/sites-enabled 配置端口\n"),t("ul",[t("li",[l._v("该目录下有一个default文件，修改默认端口名为6060")]),l._v(" "),t("li",[l._v("查看文件 cat nginx.conf")]),l._v(" "),t("li",[l._v("进入编辑模式 vi nginx.conf")]),l._v(" "),t("li",[l._v("按i键，在下方显示insert")]),l._v(" "),t("li",[l._v("按esc改变编辑状态")]),l._v(" "),t("li",[l._v("按:使光标停留在最后一行")]),l._v(" "),t("li",[l._v("输入wq!保存文档并退出编辑模式")])]),l._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[l._v("server { \n  # 默认端口为80 \n  listen 6060 default_server; \n  listen [::]:6060 default_server;\n\n  ......\n}\n")])]),l._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[l._v("1")]),t("br"),t("span",{staticClass:"line-number"},[l._v("2")]),t("br"),t("span",{staticClass:"line-number"},[l._v("3")]),t("br"),t("span",{staticClass:"line-number"},[l._v("4")]),t("br"),t("span",{staticClass:"line-number"},[l._v("5")]),t("br"),t("span",{staticClass:"line-number"},[l._v("6")]),t("br"),t("span",{staticClass:"line-number"},[l._v("7")]),t("br")])])])])]),l._v(" "),t("li",[t("p",[l._v("重启nginx")]),l._v(" "),t("ul",[t("li",[t("code",[l._v("sudo service nginx reload")])])])]),l._v(" "),t("li",[t("p",[l._v("将项目放入nginx服务")]),l._v(" "),t("ul",[t("li",[l._v("nginx的根目录文件夹地址为"),t("code",[l._v("/var/www/html")])]),l._v(" "),t("li",[l._v("nginx访问的地址为"),t("code",[l._v("ip:6060/文件名")])]),l._v(" "),t("li",[t("code",[l._v("scp -r -P 222 D:\\sf\\test test@192.168.0.146.146:/home/myspace")]),l._v(" "),t("ul",[t("li",[l._v("由于权限原因，首先要先将文件传入'/home/myspace'文件夹下(xxx)")]),l._v(" "),t("li",[l._v("p要大写")])])]),l._v(" "),t("li",[l._v("将myspace根目录下的文件剪切到nginx服务下\n"),t("ul",[t("li",[l._v("cd ~")]),l._v(" "),t("li",[t("code",[l._v("mv test /var/www/html")])])])])])]),l._v(" "),t("li",[t("p",[l._v("其它相关帮助")]),l._v(" "),t("ul",[t("li",[t("code",[l._v("/usr/sbin/nginx")]),l._v(" => 主程序")]),l._v(" "),t("li",[t("code",[l._v("sudo /usr/sbin/nginx -t")]),l._v(" => 查看是否安装完成")]),l._v(" "),t("li",[t("code",[l._v("/etc/nginx")]),l._v(" => 配置文件目录,所有的nginx配置文件都在这里")]),l._v(" "),t("li",[t("code",[l._v("/etc/nginx/nginx.conf")]),l._v(" => 主配置文件")]),l._v(" "),t("li",[t("code",[l._v("/var/log/nginx/access.log")]),l._v(" => 每一个访问请求都会记录在这个文件中，除非你做了其它设置")]),l._v(" "),t("li",[t("code",[l._v("/var/log/nginx/error.log")]),l._v(" => 任何Nginx的错误信息都会记录到这个文件中")]),l._v(" "),t("li",[l._v("常用命令"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[l._v("sudo service nginx {start|stop|restart|reload|force- reload|status|configtest|rotate|upgrade}\n")])]),l._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[l._v("1")]),t("br")])])])])])]),l._v(" "),t("h3",{attrs:{id:"_2-3-安装jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-安装jdk"}},[l._v("#")]),l._v(" 2.3. 安装jdk")]),l._v(" "),t("ol",[t("li",[l._v("查看本机是否安装了jre\n"),t("ul",[t("li",[l._v("输入 java")])])]),l._v(" "),t("li",[l._v("安装jre\n"),t("ul",[t("li",[t("code",[l._v("sudo apt install openjdk-8-jre-headless")])])])]),l._v(" "),t("li",[l._v("安装jdk\n"),t("ul",[t("li",[t("code",[l._v("sudo apt install openjdk-8-jdk-headless")])]),l._v(" "),t("li",[l._v("使用 javac 命令检测jdk是否安装成功")])])])]),l._v(" "),t("h3",{attrs:{id:"_2-4-安装tomcat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-安装tomcat"}},[l._v("#")]),l._v(" 2.4. 安装tomcat")]),l._v(" "),t("ol",[t("li",[l._v("创建tomcat文件夹\n"),t("ul",[t("li",[l._v("进入到 /usr/local/ 文件夹下 => "),t("code",[l._v("cd /usr/local/")])]),l._v(" "),t("li",[l._v("创建tomcat文件夹 => "),t("code",[l._v("sudo mkdir tomcat")])])])]),l._v(" "),t("li",[l._v("在apache官网下载对应apache-tomcat-9.0.29.tar.gz版本")]),l._v(" "),t("li",[l._v("传输apache-tomcat-9.0.29.tar.gz文件\n"),t("ul",[t("li",[l._v("传输apache-tomcat-9.0.29.tar.gz文件夹到 ~")]),l._v(" "),t("li",[t("code",[l._v("scp -r -P 222 D:\\sf\\apache-tomcat-9.0.29.tar.gz test@192.168.0.146:/home/myspace")])]),l._v(" "),t("li",[l._v("剪切到 /usr/local/mydata 目录下\n"),t("ul",[t("li",[l._v("cd ~")]),l._v(" "),t("li",[l._v("sudo mv apache-tomcat-9.0.29.tar.gz /usr/local/tomcat")])])])])]),l._v(" "),t("li",[l._v("安装tomcat\n"),t("ul",[t("li",[l._v("解压apache-tomcat-9.0.29.tar.gz文件\n"),t("ul",[t("li",[t("code",[l._v("sudo tar -zxvf apache-tomcat-9.0.29.tar.gz")])])])]),l._v(" "),t("li",[l._v("修改权限\n"),t("ul",[t("li",[t("code",[l._v("sudo chmod 755 -R apache-tomcat-9.0.29")])])])]),l._v(" "),t("li",[l._v("修改配置文件\n"),t("ul",[t("li",[t("code",[l._v("cd apache-tomcat-9.0.29/conf")])]),l._v(" "),t("li",[t("code",[l._v("vi service.xml")]),l._v(" => 编辑具体指令详见nginx配置")])])]),l._v(" "),t("li",[l._v("复制war包到webapps目录下\n"),t("ul",[t("li",[t("code",[l._v("scp -r -P 222 D:\\sf\\test.war test@192.168.0.146:/home/myspace")])])])]),l._v(" "),t("li",[l._v("剪切文件到webapps目录下\n"),t("ul",[t("li",[t("code",[l._v("sudo mv test.war /usr/local/tomcat/apache-tomcat- 9.0.29/webapps/")])])])]),l._v(" "),t("li",[l._v("启动tomcat\n"),t("ul",[t("li",[t("code",[l._v("cd apache-tomcat-9.0.29")])]),l._v(" "),t("li",[t("code",[l._v("cd bin")])]),l._v(" "),t("li",[t("code",[l._v("./startup.sh")])])])])])])]),l._v(" "),t("h3",{attrs:{id:"_2-5-安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-安装mysql"}},[l._v("#")]),l._v(" 2.5. 安装mysql")]),l._v(" "),t("ol",[t("li",[l._v("访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑\n"),t("ul",[t("li",[l._v("sudo apt-get update")])])]),l._v(" "),t("li",[l._v("开始安装mysql\n"),t("ul",[t("li",[t("code",[l._v("sudo apt-get install mysql-server")])])])]),l._v(" "),t("li",[l._v("安装过程中会出现一个界面提示输入root用户的密码，这里输入root")]),l._v(" "),t("li",[l._v("一会又出来一个界面，提示再次输入root用户的密码")]),l._v(" "),t("li",[l._v("等待一会就安装完成了")]),l._v(" "),t("li",[l._v("验证\n"),t("ul",[t("li",[t("code",[l._v("mysql -u root -p")])]),l._v(" "),t("li",[l._v("进入mysql界面")]),l._v(" "),t("li",[l._v("mysql> show databases;")])])])]),l._v(" "),t("h3",{attrs:{id:"_2-6-mysql链接navicat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-mysql链接navicat"}},[l._v("#")]),l._v(" 2.6. mysql链接navicat")]),l._v(" "),t("ol",[t("li",[l._v("配置ufw或iptables，开放端口或关闭防火墙\n"),t("ul",[t("li",[t("code",[l._v("sudo ufw allow 端口号/tcp（允许连接）")])]),l._v(" "),t("li",[l._v("ssh（22）/ MySQL（3306）")]),l._v(" "),t("li",[l._v("启用UFW\n"),t("ul",[t("li",[l._v("sudo ufw enable")])])]),l._v(" "),t("li",[l._v("检查UFW状态和规则\n"),t("ul",[t("li",[l._v("sudo ufw status verbose")])])])])]),l._v(" "),t("li",[l._v("授权\n"),t("ul",[t("li",[t("code",[l._v("mysql -u root -p")]),l._v(" => 登陆")]),l._v(" "),t("li",[t("code",[l._v("grant all privileges on *.* to root@\"%\" identified by 'root'")]),l._v(" "),t("ul",[t("li",[l._v("grant是授权命令，其中root是连接用的用户名、'root'是 数据库密码，用户名后面的“%”通用符表示 允许各host")])])])])]),l._v(" "),t("li",[l._v("修改MySql配置文件\n"),t("ul",[t("li",[t("code",[l._v("cd /etc/mysql/mysql.conf.d")])]),l._v(" "),t("li",[t("code",[l._v("sudo vim mysqld.cnf")]),l._v(" "),t("ul",[t("li",[t("code",[l._v("找到bind-address=127.0.0.1并注释，MySql就可以开启远程访问了")])])])])])]),l._v(" "),t("li",[l._v("重启mysql服务\n"),t("ul",[t("li",[l._v("sudo service mysql restart")])])])]),l._v(" "),t("h2",{attrs:{id:"_3-其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-其他"}},[l._v("#")]),l._v(" 3. 其他")]),l._v(" "),t("h3",{attrs:{id:"_3-1-防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-防火墙"}},[l._v("#")]),l._v(" 3.1. 防火墙")]),l._v(" "),t("ul",[t("li",[l._v("有时候防火墙开启无法访问nginx服务")]),l._v(" "),t("li",[l._v("查看防火墙的状态\n"),t("ul",[t("li",[t("code",[l._v("systemctl status firewalld.service")])]),l._v(" "),t("li",[l._v("或者 "),t("code",[l._v("systemctl status firewalld")])]),l._v(" "),t("li",[l._v("active(running)表示防火墙开启")])])]),l._v(" "),t("li",[l._v("关闭防火墙\n"),t("ul",[t("li",[t("code",[l._v("systemctl stop firewalld.service")])]),l._v(" "),t("li",[l._v("或者 "),t("code",[l._v("systemctl stop firewalld")])])])]),l._v(" "),t("li",[l._v("开启防火墙\n"),t("ul",[t("li",[t("code",[l._v("systemctl start firewalld.service")])]),l._v(" "),t("li",[l._v("或者 "),t("code",[l._v("systemctl status firewalld")])])])]),l._v(" "),t("li",[l._v("前面的方法，一旦重启操作系统，防火墙就自动开启了\n"),t("ul",[t("li",[t("code",[l._v("systemctl disable firewalld.service")]),l._v("，开机禁止防火墙服务器")]),l._v(" "),t("li",[t("code",[l._v("systemctl enable firewalld.service")]),l._v("，开机启动防火墙服务器")])])])]),l._v(" "),t("hr"),l._v(" "),t("br"),l._v(" "),t("p",[t("font",{attrs:{color:"#666",size:"5"}},[l._v("~End~")])],1)],1)}),[],!1,null,null,null);v.default=a.exports}}]);