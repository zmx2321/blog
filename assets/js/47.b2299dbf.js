(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{799:function(s,t,n){"use strict";n.r(t);var a=n(25),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"ts环境安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ts环境安装"}},[s._v("#")]),s._v(" ts环境安装")]),s._v(" "),n("ClientOnly",[n("Valine")],1),s._v(" "),n("h2",{attrs:{id:"_1-软件的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-软件的安装"}},[s._v("#")]),s._v(" 1. 软件的安装")]),s._v(" "),n("ol",[n("li",[s._v("安装node")])]),s._v(" "),n("h2",{attrs:{id:"_2-脚手架的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-脚手架的安装"}},[s._v("#")]),s._v(" 2. 脚手架的安装")]),s._v(" "),n("ol",[n("li",[n("code",[s._v("npm init -y")])]),s._v(" "),n("li",[s._v("在package.json中修改入口文件")])]),s._v(" "),n("ul",[n("li",[s._v("index.js => server.ts")])]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("创建入口文件 => server.ts")]),s._v(" "),n("li",[s._v("全局安装ts的模块")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm install typescript -g")])])]),s._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[s._v("使用ts的配置文件")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("tsc -init")])]),s._v(" "),n("li",[s._v("如果想把server.ts转换成server.js\n"),n("ul",[n("li",[n("code",[s._v("tsc server.ts")])]),s._v(" "),n("li",[s._v("在开发中我们使用ts，打包上线的时候我们使用js")]),s._v(" "),n("li",[s._v("因为ts可以写出严谨的代码，并且他转换的js比我们自己写的js更优化")])])])]),s._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[s._v("安装服务所需要的模块")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm install express")])]),s._v(" "),n("li",[s._v("dependencies => 当前项目所需要的环境，上线的时候也会安装")])]),s._v(" "),n("ol",{attrs:{start:"7"}},[n("li",[s._v("安装开发的时候需要的模块")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm install @types/node -g")]),s._v(" => 全局\n"),n("ul",[n("li",[s._v("帮助我们引入关于ts所需要依赖的一些内容")])])]),s._v(" "),n("li",[s._v("在开发环境，我们也需要这个工具\n"),n("ul",[n("li",[n("code",[s._v("npm install @types/node -D")])]),s._v(" "),n("li",[s._v("同时需要express => "),n("code",[s._v("npm install @types/express -D")])]),s._v(" "),n("li",[s._v("devDependencies => 表示当前在开发过程中使用的环境")])])])]),s._v(" "),n("h2",{attrs:{id:"_3-先新启一个服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-先新启一个服务"}},[s._v("#")]),s._v(" 3. 先新启一个服务")]),s._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" express "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 实例化")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听路由")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根路径")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node ts api is working...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包上线时可以识别端口号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动一个端口")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PORT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8091")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Server started...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("ul",[n("li",[s._v("输入"),n("code",[s._v("tsc")]),s._v(",将其转换成js")]),s._v(" "),n("li",[n("code",[s._v("node server")]),s._v(" => 启动")])]),s._v(" "),n("h2",{attrs:{id:"_4-自动化执行node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-自动化执行node"}},[s._v("#")]),s._v(" 4. 自动化执行node")]),s._v(" "),n("blockquote",[n("p",[s._v("将tsc命令与执行js命令整合成一个命令")])]),s._v(" "),n("ol",[n("li",[s._v("修改ts的配置 => tsconfig.json")])]),s._v(" "),n("ul",[n("li",[s._v("我们需要将js文件输出到另外一个文件夹\n"),n("ul",[n("li",[s._v("解开outDir注释")]),s._v(" "),n("li",[n("code",[s._v('"outDir": "./build"')])]),s._v(" "),n("li",[s._v("他在我们使用tsc指令的时候生产tsc文件夹")])])]),s._v(" "),n("li",[s._v("修改target属性\n"),n("ul",[n("li",[n("code",[s._v('"target": "es2020",')])]),s._v(" "),n("li",[s._v("会让我们代码更优化一些")])])]),s._v(" "),n("li",[s._v("此时执行tsc命令，会多出一个build文件夹")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("修改package.json => 主要修改scripts")])]),s._v(" "),n("ul",[n("li",[n("code",[s._v('"start-server": "tsc && node build/server.js"')]),s._v(" "),n("ul",[n("li",[s._v("给该指令定义一个名称")]),s._v(" "),n("li",[s._v("tsc表示将ts打包成js")]),s._v(" "),n("li",[s._v("后面一条指令表示执行build文件夹下的server.js指令")]),s._v(" "),n("li",[s._v("需要一次性执行两个指令")])])]),s._v(" "),n("li",[s._v("使用nodemon实现自动化\n"),n("ul",[n("li",[s._v("事实监听代码是否有变化，如果有变化，就执行")]),s._v(" "),n("li",[n("code",[s._v("npm install nodemon -g")])]),s._v(" "),n("li",[s._v("继续修改page.json\n"),n("ul",[n("li",[n("code",[s._v('"start": "nodemon -e ts -w ./ -x npm run start-server"')]),s._v(" "),n("ul",[n("li",[s._v("表示实时nodemon监听ts文件")]),s._v(" "),n("li",[s._v("监听之后再执行命令")]),s._v(" "),n("li",[s._v("只要发现你的ts文件发生变化了，监听到了，就执行一下npm命令")]),s._v(" "),n("li",[s._v("执行"),n("code",[s._v("npm start")]),s._v("命令")])])])])])])])])],1)}),[],!1,null,null,null);t.default=e.exports}}]);