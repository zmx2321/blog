(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{929:function(s,t,n){"use strict";n.r(t);var a=n(25),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"运行环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行环境"}},[s._v("#")]),s._v(" 运行环境")]),s._v(" "),n("ClientOnly",[n("Valine")],1),s._v(" "),n("p",[n("a",{attrs:{href:"https://zmx2321.github.io/blog_code/interview/interview-one-side/16.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("代码笔记"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"_1-简述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-简述"}},[s._v("#")]),s._v(" 1. 简述")]),s._v(" "),n("ul",[n("li",[s._v("运行环境即浏览器\n"),n("ul",[n("li",[s._v("server端有nodejs")]),s._v(" "),n("li",[s._v("移动端可能在微信、支付宝等app中运行页面，但这些实际上还是浏览器\n"),n("ul",[n("li",[s._v("比如说微信，他是以微信的功能为主，但他里面实际上嵌了webview模块，具备浏览器的功能")])])]),s._v(" "),n("li",[s._v("即各种app对网页来说，都是浏览器")])])]),s._v(" "),n("li",[s._v("浏览器要下载代码，渲染出页面，期间会执行若干JS\n"),n("ul",[n("li",[s._v("前端和服务端最大的差别在于，他需要随时地下载网页代码、渲染")]),s._v(" "),n("li",[s._v("所以他对性能就需要比较高的要求\n"),n("ul",[n("li",[s._v("所以需要针对运行环境的特点来优化，如何让网页加载快一些")])])])])]),s._v(" "),n("li",[s._v("需要保证代码在浏览器中稳定而且高效")])]),s._v(" "),n("h2",{attrs:{id:"_2-题目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-题目"}},[s._v("#")]),s._v(" 2. 题目")]),s._v(" "),n("h3",{attrs:{id:"_2-1-网页加载过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-网页加载过程"}},[s._v("#")]),s._v(" 2.1. 网页加载过程")]),s._v(" "),n("ul",[n("li",[s._v("从输入url到渲染出页面的整个过程")]),s._v(" "),n("li",[s._v("window.onload和DOMContentLoaded的区别")])]),s._v(" "),n("h3",{attrs:{id:"_2-2-性能和体验的优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-性能和体验的优化"}},[s._v("#")]),s._v(" 2.2. 性能和体验的优化")]),s._v(" "),n("ul",[n("li",[s._v("性能优化原则是什么")]),s._v(" "),n("li",[s._v("怎么样让加载更快，举例说明")]),s._v(" "),n("li",[s._v("怎么样让渲染更快，举例说明")]),s._v(" "),n("li",[s._v("防抖是什么，举例说明，手写防抖")]),s._v(" "),n("li",[s._v("节流是什么，举例说明，手写节流")])]),s._v(" "),n("h3",{attrs:{id:"_2-3-安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-安全"}},[s._v("#")]),s._v(" 2.3. 安全")]),s._v(" "),n("ul",[n("li",[s._v("常见的web前端攻击方式有哪些")]),s._v(" "),n("li",[s._v("怎么去预防这些攻击")])]),s._v(" "),n("h2",{attrs:{id:"_3-知识点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-知识点"}},[s._v("#")]),s._v(" 3. 知识点")]),s._v(" "),n("h3",{attrs:{id:"_3-1-网页加载过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-网页加载过程"}},[s._v("#")]),s._v(" 3.1. 网页加载过程")]),s._v(" "),n("h4",{attrs:{id:"_3-1-1-加载资源的形式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-加载资源的形式"}},[s._v("#")]),s._v(" 3.1.1. 加载资源的形式")]),s._v(" "),n("ul",[n("li",[s._v("html代码")]),s._v(" "),n("li",[s._v("媒体文件，如图片、视频等")]),s._v(" "),n("li",[s._v("js、css代码")])]),s._v(" "),n("h4",{attrs:{id:"_3-1-2-加载资源的过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-加载资源的过程"}},[s._v("#")]),s._v(" 3.1.2. 加载资源的过程")]),s._v(" "),n("ol",[n("li",[s._v("DNS解析：域名 => ip地址\n"),n("ul",[n("li",[s._v("Domain Name System => 域名系统")]),s._v(" "),n("li",[s._v("是将域名和IP地址相互映射的一个分布式数据库\n"),n("ul",[n("li",[s._v("我们访问域名的时候，实际上对应的还是ip地址")])])]),s._v(" "),n("li",[s._v("特别是一个大型的网站，不同区域的服务端ip地址是不一样的，因为他们分区域做了ip地址的均衡或者代理")]),s._v(" "),n("li",[s._v("我们在输入域名的时候，域名解析服务会根据地域去解析不同的域名，网站会访问的更快一些")])])]),s._v(" "),n("li",[s._v("浏览器根据ip地址向服务器发起http请求\n"),n("ul",[n("li",[s._v("发起请求")]),s._v(" "),n("li",[s._v("浏览器只是一个发起方，真正的核心模块还是操作系统，操作系统里面有一些能够发送网络请求的系统服务，浏览器调用这些系统服务，操作系统去把这个请求发送")]),s._v(" "),n("li",[s._v("我们这边说是http请求，实际上里面还涉及到TCP的连接(三次握手)")])])]),s._v(" "),n("li",[s._v("服务器接收并处理http请求，返回给浏览器\n"),n("ul",[n("li",[s._v("响应请求")]),s._v(" "),n("li",[s._v("服务器如何接收并处理请求就是服务端的内容了(可以通过nodejs了解)")])])])]),s._v(" "),n("h4",{attrs:{id:"_3-1-3-渲染页面的过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-渲染页面的过程"}},[s._v("#")]),s._v(" 3.1.3. 渲染页面的过程")]),s._v(" "),n("ol",[n("li",[s._v("浏览器根据html代码生成DOM Tree\n"),n("ul",[n("li",[s._v("document object model => 文档对象模型")])])]),s._v(" "),n("li",[s._v("浏览器根据css代码生成cssOM\n"),n("ul",[n("li",[s._v("css object model => css对象模型")])])]),s._v(" "),n("li",[s._v("将DOM Tree和cssOM整合形成Render Tree\n"),n("ul",[n("li",[s._v("Render Tree => 渲染树")]),s._v(" "),n("li",[s._v("只有dom树是没法渲染的，有些标签的css属性是在css对象模型中的\n"),n("ul",[n("li",[s._v("宽、高、颜色、字体大小等")])])]),s._v(" "),n("li",[s._v("dom结构里面挂了很多css属性\n"),n("ul",[n("li",[s._v("每选一个节点，下面就有很多css属性")])])])])]),s._v(" "),n("li",[s._v("浏览器根据Render Tree渲染页面")]),s._v(" "),n("li",[s._v("如果遇到"),n("code",[s._v("<script>")]),s._v("则暂停渲染，优先加载并执行JS代码，完成再继续\n"),n("ul",[n("li",[s._v("js和渲染是共用一个线程的，因为js有可能会改变dom结构，即Render Tree结构")]),s._v(" "),n("li",[s._v("渲染过程中遇到"),n("code",[s._v("<script>")]),s._v("标签，就不渲染了，因为可能没有用，因为js可能改变dom结构，这就是遇到"),n("code",[s._v("<script>")]),s._v("标签先执行js代码的由来，执行完js之后再继续进行渲染")])])]),s._v(" "),n("li",[s._v("直至把Render Tree渲染完成")])]),s._v(" "),n("h4",{attrs:{id:"_3-1-4-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-总结"}},[s._v("#")]),s._v(" 3.1.4. 总结")]),s._v(" "),n("ul",[n("li",[s._v("为何把css放到head中\n"),n("ul",[n("li",[s._v("html页面是从上往下执行的，如果把css放到下面，渲染完成dom之后，又发现css，css加载完成之后，形成cssOM，又和当前的dom树合并形成render tree，改变样式之后，可能会重新渲染dom树")]),s._v(" "),n("li",[s._v("从上至下正常渲染dom，发现css，样式改变，比如字体大小，重新渲染改变字体大小")]),s._v(" "),n("li",[s._v("css放到head中是为了dom树生成完之前就加载完，dom树生成完之后就和所有的css整合生成一个完整的render tree，即一步渲染完成")])])]),s._v(" "),n("li",[s._v("为何要把js放到body下面\n"),n("ul",[n("li",[s._v("遇到js之后，要暂停渲染，执行完js之后才继续渲染")]),s._v(" "),n("li",[s._v("js可能会修改dom结构，如果放在中间，可能会出错")]),s._v(" "),n("li",[s._v("渲染了一部分，会停止渲染，即卡住的状态")]),s._v(" "),n("li",[s._v("会造成页面的渲染过程比较长")]),s._v(" "),n("li",[s._v("我们需要把先能渲染出来的东西全部渲染出来")])])]),s._v(" "),n("li",[s._v("遇到img标签\n"),n("ul",[n("li",[s._v("不会阻塞渲染过程，img资源没过来会先空着")])])]),s._v(" "),n("li",[s._v("window.onload和DOMContentLoaded"),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'load'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 页面的全部资源加载完才会执行，包括图片、视频等")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// iframe也会这样")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DOMContentLoaded'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DOM 渲染完即可执行(网页加载完了)，此时图片、视频还可能没有加载完")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 像jquery都是要监听DOMContentLoaded事件做一些处理")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])])]),s._v(" "),n("h3",{attrs:{id:"_3-2-性能和体验的优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-性能和体验的优化"}},[s._v("#")]),s._v(" 3.2. 性能和体验的优化")]),s._v(" "),n("h4",{attrs:{id:"_3-2-1-简述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-简述"}},[s._v("#")]),s._v(" 3.2.1. 简述")]),s._v(" "),n("ul",[n("li",[s._v("性能优化是一个综合性问题，没有标准答案，但要求尽量全面")]),s._v(" "),n("li",[s._v("某些细节问题可能会单独提问：手写防抖、节流\n"),n("ul",[n("li",[s._v("属于体验上的优化")])])]),s._v(" "),n("li",[s._v("只关注核心点、针对面试")]),s._v(" "),n("li",[s._v("性能优化原则\n"),n("ul",[n("li",[s._v("多使用内存、缓存、或其他方法")]),s._v(" "),n("li",[s._v("减少CPU计算量，减少网络加载耗时")])])]),s._v(" "),n("li",[s._v("性能优化主要目的就是使页面加载更快更流畅\n"),n("ul",[n("li",[s._v("适用所有编程的性能优化 - 空间换时间")]),s._v(" "),n("li",[s._v("比如Chrome浏览器加载很快，就是因为它使用了空间换时间的概念\n"),n("ul",[n("li",[s._v("比如标签页，一般浏览器都放在同一个进程中，而Chrome浏览器的思路就是每个标签页都有一个单独的进程，这样空间就使用地多了，但速度也更快了，进程和进程之间不会相互干扰，标签页之间也不会相互干扰，每个标签页，可利用的空间也多了，空间多了，就可以用空间换时间，从而加载更快")]),s._v(" "),n("li",[s._v("历史背景：在Chrome之前的很多浏览器，计算机的内存空间不宽裕")])])])])]),s._v(" "),n("li",[s._v("从哪里入手\n"),n("ul",[n("li",[s._v("让加载更快\n"),n("ul",[n("li",[s._v("下载速度更快")])])]),s._v(" "),n("li",[s._v("让渲染更快\n"),n("ul",[n("li",[s._v("代码逻辑合理，没有重复多余的渲染操作，没有等待")]),s._v(" "),n("li",[s._v("至少在同一时间内，让用户看到的更快")])])])])])]),s._v(" "),n("h4",{attrs:{id:"_3-2-2-让加载更快"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-让加载更快"}},[s._v("#")]),s._v(" 3.2.2. 让加载更快")]),s._v(" "),n("ul",[n("li",[s._v("减少资源体积，压缩代码\n"),n("ul",[n("li",[s._v("服务端会进行gzip压缩，大概到1/3 => 10kb到3kb")]),s._v(" "),n("li",[s._v("浏览器再进行反解析")]),s._v(" "),n("li",[s._v("这里只是引申，不是前端范围")])])]),s._v(" "),n("li",[s._v("减少访问次数\n"),n("ul",[n("li",[s._v("合并代码、ssr服务端渲染、缓存")]),s._v(" "),n("li",[s._v("合并代码\n"),n("ul",[n("li",[s._v("很多js文件，webpack打包完之后，只有几个，即合并代码\n"),n("ul",[n("li",[s._v("合并完代码之后，就可以减少访问次数")]),s._v(" "),n("li",[s._v("三个文件，每个文件3kb，分别访问3kb比一次性访问9kb更耗时")])])]),s._v(" "),n("li",[s._v("图片，css也可以压缩\n"),n("ul",[n("li",[s._v("雪碧图也是减少访问次数的一个示例")])])])])]),s._v(" "),n("li",[s._v("ssr服务端渲染\n"),n("ul",[n("li",[s._v("服务端渲染指服务端把页面以及页面要显示的内容一块给前端，前端拿到内容之后就直接展示")]),s._v(" "),n("li",[s._v("不使用服务端渲染的话，即传统方法是，把页面拿到之后，再通过ajax加载资源，加载资源之后再去下载资源，下载完之后再渲染到页面上去")])])]),s._v(" "),n("li",[s._v("缓存\n"),n("ul",[n("li",[s._v("如果页面要访问10个资源，如果没有缓存，就要请求10次，如果有缓存，那么命中缓存的那些资源就不需要重复请求")])])])])]),s._v(" "),n("li",[s._v("使用更快的网络：CDN\n"),n("ul",[n("li",[s._v("CDN是根据区域去做服务器的处理")]),s._v(" "),n("li",[s._v("即如果使用cdn，从北京访问的ip和从上海访问的ip是不一样的")])])])]),s._v(" "),n("h4",{attrs:{id:"_3-2-3-让渲染更快"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-让渲染更快"}},[s._v("#")]),s._v(" 3.2.3. 让渲染更快")]),s._v(" "),n("ul",[n("li",[s._v("CSS放在head，JS放在body最下面")]),s._v(" "),n("li",[s._v("尽早执行JS，用DOMContentLoaded触发\n"),n("ul",[n("li",[s._v("js尽早执行，没必要等图片、视频等资源加载完成，即onload")])])]),s._v(" "),n("li",[s._v("懒加载\n"),n("ul",[n("li",[s._v("图片懒加载，上滑加载更多")])])]),s._v(" "),n("li",[s._v("对DOM查询进行缓存")]),s._v(" "),n("li",[s._v("频繁DOM操作，使用代码片段合并到一起插入DOM结构\n"),n("ul",[n("li",[s._v("createDocumentFragment")])])]),s._v(" "),n("li",[s._v("节流(throttle)、防抖(debounce)\n"),n("ul",[n("li",[s._v("让渲染更加流畅")])])])]),s._v(" "),n("h4",{attrs:{id:"_3-2-4-加载渲染优化示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-加载渲染优化示例"}},[s._v("#")]),s._v(" 3.2.4. 加载渲染优化示例")]),s._v(" "),n("ul",[n("li",[s._v("资源合并\n"),n("ul",[n("li",[s._v("请求次数越少越划算\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_zyhb.png",alt:"yh_zyhb"}})])])]),s._v(" "),n("li",[s._v("缓存\n"),n("ul",[n("li",[s._v("webpack中的contenthash会根据内容生成hash值")]),s._v(" "),n("li",[s._v("静态资源加hash后缀，根据文件内容计算hash")]),s._v(" "),n("li",[s._v("文件内容不变，则hash不变，则url不变")]),s._v(" "),n("li",[s._v("url和文件不变，则会自动触发http缓存机制，返回304")]),s._v(" "),n("li",[s._v("浏览器和服务器都会遵从http缓存机制，前端只需要尽可能去命中这个缓存就行了")]),s._v(" "),n("li",[s._v("比如新上线一个功能，只改了一个js，这时候只有一个js名字会改，返回200，其余的都不变，不变的资源加载会命中缓存，返回304\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_hc.png",alt:"yh_hc"}})])])]),s._v(" "),n("li",[s._v("CDN\n"),n("ul",[n("li",[s._v("大厂静态资源基本都是用cdn做的")]),s._v(" "),n("li",[s._v("用cdn会更大程度满足网络的性能")]),s._v(" "),n("li",[s._v("因为cdn是专门做静态文件的服务")]),s._v(" "),n("li",[s._v("而且是根据地域来做网络服务的")]),s._v(" "),n("li",[s._v("而且cdn是完全满足上面说的http缓存机制(304机制)的\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_cdn.png",alt:"yh_cdn"}})])])]),s._v(" "),n("li",[s._v("SSR\n"),n("ul",[n("li",[s._v("是一个比较宽泛的概念，全称是：server side render，即服务端渲染")]),s._v(" "),n("li",[s._v("服务端渲染：将网页和数据一起加载、一起渲染")]),s._v(" "),n("li",[s._v("非SSR(前后端分离)：先加载网页，再加载数据，再渲染数据\n"),n("ul",[n("li",[s._v("网页的ajax去加载数据，数据返回之后再渲染")])])]),s._v(" "),n("li",[s._v("所以ssr也是减少网络请求的一种思路")]),s._v(" "),n("li",[s._v("早先的JSP、ASP、PHP，现在的vue、react(借助node的一些能力做)")])])]),s._v(" "),n("li",[s._v("懒加载\n"),n("ul",[n("li",[s._v("有时候需要在可视区域加载，不在可视区的暂时不加载")]),s._v(" "),n("li",[s._v("我们可以把图片设置成一个默认地址(小)")]),s._v(" "),n("li",[s._v("把图片的真实地址放到"),n("code",[s._v("data-xxx")]),s._v("下面，在这里图片不会加载")]),s._v(" "),n("li",[s._v("根据事件判断到可视区的时候，把"),n("code",[s._v("data-xxx")]),s._v("的值赋值给src\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_ljz.png",alt:"yh_ljz"}})])])]),s._v(" "),n("li",[s._v("缓存DOM查询\n"),n("ul",[n("li",[s._v("把dom结果赋值成变量")]),s._v(" "),n("li",[s._v("js计算和dom查询不是一个数量级的，js计算非常快\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_dom1.png",alt:"yh_dom1"}})]),s._v(" "),n("li",[s._v("多个dom操作一起插入到dom结构，使用代码片段\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_dom2.png",alt:"yh_dom2"}})])])]),s._v(" "),n("li",[s._v("尽早开始js执行\n"),n("img",{attrs:{src:"/blog/images/interview/interview-one-side/yh_js.png",alt:"yh_js"}})])]),s._v(" "),n("h4",{attrs:{id:"_3-2-5-防抖-debounce"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-5-防抖-debounce"}},[s._v("#")]),s._v(" 3.2.5. 防抖(debounce)")]),s._v(" "),n("ul",[n("li",[s._v("场景\n"),n("ul",[n("li",[s._v("监听一个输入框的，在文字变化后触发change事件")]),s._v(" "),n("li",[s._v("直接使用keyup事件，会频繁触发change事件")]),s._v(" "),n("li",[s._v("防抖：用户输入结束或暂停的时候，才会触发change事件")])])]),s._v(" "),n("li",[s._v("防抖机制简述\n"),n("ul",[n("li",[s._v("防抖机制指的是频繁输入或者频繁操作的时候，最后触发")]),s._v(" "),n("li",[s._v("先定义一个定时器")]),s._v(" "),n("li",[s._v("监听事件的时候，最开始是没有这个定时器的(null)")]),s._v(" "),n("li",[s._v("给定时器赋值\n"),n("ul",[n("li",[s._v("setTimeout会返回一个定时器的id")]),s._v(" "),n("li",[s._v("给定时器赋值，同时触发一个setTimeout的异步任务")]),s._v(" "),n("li",[s._v("这个任务是xx毫秒之后执行")]),s._v(" "),n("li",[s._v("执行的结果就是定时器里面的方法")])])]),s._v(" "),n("li",[s._v("执行完定时器里的方法之后还要在方法里面清空定时器\n"),n("ul",[n("li",[s._v("xx毫秒触发方法之后，才会清空timer")])])])])]),s._v(" "),n("li",[s._v("手写防抖\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://zmx2321.github.io/blog_code/interview/interview-one-side/example/run-fun/%E9%98%B2%E6%8A%96(debounce).html",target:"_blank",rel:"noopener noreferrer"}},[s._v("手写demo传送门"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("input")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("input1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听键盘输入")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* const input1 = document.getElementById('input1');\n  input1.addEventListener('keyup', function() {\n      console.log(input1.value);  // 每一次按键都会打印\n  }) */")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n   * 体验防抖\n   */")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果每次按键都走一次请求会非常糟糕")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 实现输入完停顿一段时间(比如半秒)，再做操作(打印或者请求)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个机制(需求)就是防抖")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 需要用到定时器 => 实际上就是定时器的一种应用")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" input1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" timer  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  input1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'keyup'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 比如输入123,")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 输入1，此时timeer不存在，timer赋值定时器id(1)，并把方法加入异步队列，等待时机执行")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 马上输入2，此时timer存在，但异步队列中的方法还未执行(时机未到)，清除定时器(即1的定时任务)，赋值定时器id(2)，，并把方法加入异步队列，等待时机执行")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 马上输入3，同理")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 停止输入，即超过500毫秒，触发定时器任务，获取value值并打印")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清空定时器")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("clearTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一直输入，只要中间间断不超过500毫秒，就不会打印")]),s._v("\n    timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模拟触发change事件")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("input1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清空定时器")]),s._v("\n      timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n   * 封装防抖\n   */")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// debounce是对函数的封装，最终返回的应该也是一个函数")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 延迟时间默认500毫秒")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("debounce")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" delay "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// timer是在闭包中的 => 下面的if(timer)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这样不会被外界轻易拿到 => 即不对外暴露")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 我们在外面使用不需要关心")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 同时也是在debounce的作用域中")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 闭包的使用场景：函数当做返回值或者参数传入")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 函数作为返回值，这就形成闭包了")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里面的timer需要在它定义的作用域往上寻找")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("clearTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 触发change事件")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第一个参数是改变this指向")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第二个参数是获取所有的参数")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// apply第二个参数开始，只接收数组")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// fn函数在执行的时候，argument传进来")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// debounce返回的函数可能会传进来一些参数")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 面试使用fn()也没问题")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// fn()")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arguments"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清空定时器")]),s._v("\n        timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" delay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" input1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用debounce生成一个函数")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果要是用之前fn里面的this，这里不能使用箭头函数")]),s._v("\n  input1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'keyup'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("debounce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("e")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果不传arguments，在这里无法识别e，也就无法获取当前dom")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("input1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不传默认500ms，传的话就覆盖")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br")])])])]),s._v(" "),n("h4",{attrs:{id:"_3-2-6-节流-throttle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-6-节流-throttle"}},[s._v("#")]),s._v(" 3.2.6. 节流(throttle)")]),s._v(" "),n("ul",[n("li",[s._v("场景\n"),n("ul",[n("li",[s._v("拖拽一个元素时，要随时拿到该元素被拖拽的位置")]),s._v(" "),n("li",[s._v("直接用drag事件，则会频繁触发，很容易造成卡顿")]),s._v(" "),n("li",[s._v("节流：无论拖拽速度多快，都会每隔100ms触发一次")])])]),s._v(" "),n("li",[s._v("节流机制简述\n"),n("ul",[n("li",[s._v("节流机制指的是频繁输入或者频繁操作的时候，保持一个频率，连续触发")])])]),s._v(" "),n("li",[s._v("手写节流\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://zmx2321.github.io/blog_code/interview/interview-one-side/example/run-fun/%E8%8A%82%E6%B5%81(throttle).html",target:"_blank",rel:"noopener noreferrer"}},[s._v("手写demo传送门"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n  "),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("#div1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 200px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("border")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1px solid #ccc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" #f00"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("div1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("draggable")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("可拖拽"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听拖拽")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* const div1 = document.getElementById('div1');\n  div1.addEventListener('drag', function(e) {\n    // 每次移动都会频繁打印\n    console.log(e.offsetX, e.offsetY);  // 打印坐标\n  }) */")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n   * 体验节流\n   */")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" div1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'div1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  div1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'drag'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 拖拽是永远不间断进行的，即连续触发")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第一次没值，但马上就有值了")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 但只要有值就return出去")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等下面100ms到了，timer被赋值成null，这个if就不执行")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 给timer赋值一个定时器")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 100ms没到的时候，里面方法没执行，定时器就不会被赋值成null")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 100ms到了，打印，赋值成null")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// if不执行，重新生成一个定时任务,timer有值，return")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 直到定时任务执行之前都return")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行完定时任务，timer又为null")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 再次生成一个定时任务")]),s._v("\n    timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每次移动都会频繁打印")]),s._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("offsetX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("offsetY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印坐标")]),s._v("\n\n      timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n   * 封装节流\n   */")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("throttle")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" delay "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个timer是在闭包里面的")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果不使用apply改变this指向，下面的throttle方法的参数指向这个函数")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不会传给下面的那个fn")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一般写一个事件，function里面都要加上event参数，即事件对象")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arguments"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印坐标")]),s._v("\n\n        timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" delay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" div1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'div1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果用this指向，不能用箭头函数")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 上面如果不加arguments，这里无法获取坐标")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果不改变this指向，throttle方法里面的参数会传给throttle返回的那个函数")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// event这个事件对象是传给return的这个函数的，再由这个函数传给fn的")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// throttle里面的这个函数是fn，需要有事件对象")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 事件监听有事件对象，事件对象一般是监听事件里面的参数，这里的事件对象在throttle的返回值中，即return里面的this")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所以fn.apply(this, arguments)意思是把fn函数的this指向事件对象，并传入所有参数")]),s._v("\n  div1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'drag'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("throttle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 箭头函数指向父级，即当前函数所在环境，即window")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("offsetX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("offsetY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印坐标")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不传默认100")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br")])])])]),s._v(" "),n("h3",{attrs:{id:"_3-3-安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-安全"}},[s._v("#")]),s._v(" 3.3. 安全")]),s._v(" "),n("h4",{attrs:{id:"_3-3-1-简述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-简述"}},[s._v("#")]),s._v(" 3.3.1. 简述")]),s._v(" "),n("ul",[n("li",[s._v("最常见的web前端攻击方式\n"),n("ul",[n("li",[s._v("XSS跨站请求攻击")]),s._v(" "),n("li",[s._v("XSRF跨站请求伪造")])])])]),s._v(" "),n("h4",{attrs:{id:"_3-3-2-xss跨站请求攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-xss跨站请求攻击"}},[s._v("#")]),s._v(" 3.3.2. XSS跨站请求攻击")]),s._v(" "),n("ul",[n("li",[s._v("xss场景\n"),n("ul",[n("li",[s._v("一个博客网站，发表一篇博客，其中嵌入"),n("code",[s._v("<script>")]),s._v("脚本")]),s._v(" "),n("li",[s._v("脚本内容：获取cookie，发送到我的服务器(服务器配合跨域)\n"),n("ul",[n("li",[s._v("cookie里面有个人的敏感信息")]),s._v(" "),n("li",[s._v("即发布这篇博客，有人查看它，很轻松地就可以收割访问者的cookie")])])])])]),s._v(" "),n("li",[s._v("xss示例\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://zmx2321.github.io/blog_code/interview/interview-one-side/example/run-fun/XSS%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E6%94%BB%E5%87%BB.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("手写demo传送门"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 先设置cookie做模拟")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a=100"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b=200"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userid=xxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("一段文字1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("一段文字2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("一段文字3"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"获取cookie信息："')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")])])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 使用特殊字符就不会被获取 --\x3e")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- &lt;script&gt;alert(document.cookie);&lt;/script&gt; --\x3e")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])]),s._v(" "),n("li",[s._v("xss预防\n"),n("ul",[n("li",[s._v("替换特殊字符\n"),n("ul",[n("li",[n("code",[s._v("<")]),s._v(" => "),n("code",[s._v("&lt;")])]),s._v(" "),n("li",[n("code",[s._v(">")]),s._v(" => "),n("code",[s._v("&gt;")])]),s._v(" "),n("li",[s._v("即"),n("code",[s._v("<script>")]),s._v(" => "),n("code",[s._v("&lt;script&gt;")]),s._v("，显示在页面上，且不会被作为脚本执行")])])]),s._v(" "),n("li",[s._v("前端要替换，后端也要替换")]),s._v(" "),n("li",[s._v("可以在npm官网找相关工具 => xss工具\n"),n("ul",[n("li",[s._v("将需要替换的内容当参数传进里面的方法，就可以进行替换了")])])])])])]),s._v(" "),n("h4",{attrs:{id:"_3-3-3-xsrf跨站请求伪造"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-xsrf跨站请求伪造"}},[s._v("#")]),s._v(" 3.3.3. XSRF跨站请求伪造")]),s._v(" "),n("ul",[n("li",[s._v("XSRF场景\n"),n("ul",[n("li",[s._v("你正在购物，看中了某个商品，商品id是100")]),s._v(" "),n("li",[s._v("打算买，但还没有买")]),s._v(" "),n("li",[s._v("付费接口是"),n("code",[s._v("xxx/pay?id=100")]),s._v("，但没有任何验证")]),s._v(" "),n("li",[s._v("我是攻击者，我看中了一个商品，id是200")]),s._v(" "),n("li",[s._v("我现在想让你给我买")]),s._v(" "),n("li",[s._v("向你发送一封电子邮件，邮件标题很吸引人")]),s._v(" "),n("li",[s._v("但邮件正文隐藏着"),n("code",[s._v('<img src="xxx.com/pay?id=200">')])]),s._v(" "),n("li",[s._v("你一查看邮件，就帮我购买了id是200的商品\n"),n("ul",[n("li",[s._v("正在购物，肯定已经登陆了购物网站，即有了用户信息(cookie)")]),s._v(" "),n("li",[s._v("打开电子邮件的时候图片的src是自动执行的")]),s._v(" "),n("li",[s._v("img发送的请求是支持跨域的，所以一打开邮件，你的用户信息就已经被带过去了")])])])])]),s._v(" "),n("li",[s._v("XSRF预防\n"),n("ul",[n("li",[s._v("使用post接口\n"),n("ul",[n("li",[s._v("使用post接口，img攻击是无效的，即img的跨域攻击在这里没有效果")]),s._v(" "),n("li",[s._v("在post接口做跨域，只能server端支持")])])]),s._v(" "),n("li",[s._v("增加验证，例如密码、短信验证码、指纹等")])])])]),s._v(" "),n("h2",{attrs:{id:"_4-面试题解答-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-面试题解答-总结"}},[s._v("#")]),s._v(" 4. 面试题解答(总结)")]),s._v(" "),n("h3",{attrs:{id:"_4-1-网页加载过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-网页加载过程"}},[s._v("#")]),s._v(" 4.1. 网页加载过程")]),s._v(" "),n("ul",[n("li",[s._v("从输入url到渲染出页面的整个过程\n"),n("ul",[n("li",[s._v("下载资源：各个资源类型，下载过程")]),s._v(" "),n("li",[s._v("渲染页面：结合html、css、js等")])])]),s._v(" "),n("li",[s._v("window.onload和DOMContentLoaded的区别\n"),n("ul",[n("li",[s._v("window.onload是资源全部加载完才能执行，包括图片")]),s._v(" "),n("li",[s._v("DOMContentLoaded是DOM渲染完成即可，图片可能尚未渲染")])])]),s._v(" "),n("li",[s._v("加载资源的形式\n"),n("ul",[n("li",[s._v("网页是通过html、css、img、js等待这些形式加载资源的")])])]),s._v(" "),n("li",[s._v("加载资源的过程\n"),n("ul",[n("li",[s._v("dns解析域名到ip => 浏览器发送http请求到服务端(三次握手) => 服务端再响应请求到客户端(四次挥手) => 渲染页面")])])]),s._v(" "),n("li",[s._v("渲染页面过程\n"),n("ul",[n("li",[s._v("浏览器根据html代码生成DOM")]),s._v(" "),n("li",[s._v("浏览器根据css代码生成cssOM")]),s._v(" "),n("li",[s._v("将DOM Tree和cssOM整合形成Render Tree")]),s._v(" "),n("li",[s._v("浏览器根据Render Tree渲染页面")]),s._v(" "),n("li",[s._v("遇到js暂停渲染，优先执行js，执行完之后继续渲染")])])])]),s._v(" "),n("h3",{attrs:{id:"_4-2-性能和体验的优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-性能和体验的优化"}},[s._v("#")]),s._v(" 4.2. 性能和体验的优化")]),s._v(" "),n("ul",[n("li",[s._v("性能优化原则是什么\n"),n("ul",[n("li",[s._v("性能优化主要目的就是使页面加载更快更流畅")]),s._v(" "),n("li",[s._v("多使用内存、缓存、或其他方法")]),s._v(" "),n("li",[s._v("减少CPU计算量，减少网络加载耗时，即可以使用空间换时间，\n"),n("ul",[n("li",[s._v("例如浏览器，一个标签页就是一个进程")])])])])]),s._v(" "),n("li",[s._v("怎么样让加载更快，举例说明\n"),n("ul",[n("li",[s._v("减少资源体积：压缩代码")]),s._v(" "),n("li",[s._v("减少访问次数：合并代码、雪碧图、ssr服务端渲染、缓存")]),s._v(" "),n("li",[s._v("使用更快的网络：CDN\n"),n("ul",[n("li",[s._v("域名匹配离你最近的ip")])])])])]),s._v(" "),n("li",[s._v("怎么样让渲染更快，举例说明\n"),n("ul",[n("li",[s._v("CSS放在head，JS放在body最下面")]),s._v(" "),n("li",[s._v("用DOMContentLoaded触发js，即在图片等静态资源加载前触发")]),s._v(" "),n("li",[s._v("懒加载")]),s._v(" "),n("li",[s._v("对DOM查询进行缓存")]),s._v(" "),n("li",[s._v("频繁DOM操作，使用代码片段合并到一起插入DOM结构\n"),n("ul",[n("li",[s._v("createDocumentFragment")])])]),s._v(" "),n("li",[s._v("使用节流和防抖优化渲染体验")])])]),s._v(" "),n("li",[s._v("防抖是什么，举例说明，手写防抖\n"),n("ul",[n("li",[s._v("防抖机制指的是频繁输入或者频繁操作的时候，最后触发")]),s._v(" "),n("li",[s._v("手写见上")])])]),s._v(" "),n("li",[s._v("节流是什么，举例说明，手写节流\n"),n("ul",[n("li",[s._v("节流机制指的是频繁输入或者频繁操作的时候，保持一个频率，连续触发")]),s._v(" "),n("li",[s._v("手写见上")])])])]),s._v(" "),n("h3",{attrs:{id:"_4-3-安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-安全"}},[s._v("#")]),s._v(" 4.3. 安全")]),s._v(" "),n("ul",[n("li",[s._v("常见的web前端攻击方式有哪些\n"),n("ul",[n("li",[s._v("XSS跨站请求攻击")]),s._v(" "),n("li",[s._v("XSRF跨站请求伪造")])])]),s._v(" "),n("li",[s._v("怎么去预防这些攻击\n"),n("ul",[n("li",[s._v("XSS跨站请求攻击 => 标签用特殊字符表示")]),s._v(" "),n("li",[s._v("XSRF跨站请求伪造 => 用post请求，并添加验证")])])])]),s._v(" "),n("hr"),s._v(" "),n("br"),s._v(" "),n("p",[n("font",{attrs:{color:"#666",size:"5"}},[s._v("~End~")])],1)],1)}),[],!1,null,null,null);t.default=e.exports}}]);